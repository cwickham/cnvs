<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cnvs: avoiding point and click hell • cnvs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="cnvs: avoiding point and click hell">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cnvs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/cnvs.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cnvs-use-examples.html">cnvs: avoiding point and click hell</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cwickham/cnvs">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>cnvs: avoiding point and click hell</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cwickham/cnvs/blob/master/vignettes/cnvs-use-examples.Rmd"><code>vignettes/cnvs-use-examples.Rmd</code></a></small>
      <div class="hidden name"><code>cnvs-use-examples.Rmd</code></div>

    </div>

    
    
<p>My biggest complaint when using the Canvas API is the inordinate amount of pointing and clicking that it requires to get anything done. Here are some examples of such tasks that are easily automated using the cnvs package.</p>
<p><em>Right now this is a work in progress to help me think about what a higher level API might look like</em></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(cnvs)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(purrr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tibble)</a></code></pre></div>
<p>I’ll demonstrate with one of my own courses:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">test_course &lt;-<span class="st"> </span><span class="dv">1732420</span></a></code></pre></div>
<p>The code won’t work for you because you don’t have permissions on my course. I recommend creating your own test course on <a href="https://canvas.instructure.com/" class="uri">https://canvas.instructure.com/</a>, and substituting in your own course ID.</p>
<div id="create-many-assignments-all-at-once" class="section level1">
<h1 class="hasAnchor">
<a href="#create-many-assignments-all-at-once" class="anchor"></a>Create many assignments all at once</h1>
<p><strong>Problem</strong>: You have ten homeworks due every Friday that you want students to submit online.</p>
<p><strong>Canvas API docs</strong>: <a href="https://canvas.instructure.com/doc/api/assignments.html#method.assignments_api.create" class="uri">https://canvas.instructure.com/doc/api/assignments.html#method.assignments_api.create</a></p>
<p>Start by generating a tibble to hold the parameters of your homeworks, being careful to have dates in the ISO 8601 format canvas expects:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">iso8601 &lt;-<span class="st"> </span>lubridate<span class="op">::</span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/stamp.html">stamp</a></span>(<span class="st">"2014-10-21T18:48:00Z"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; Multiple formats matched: "%Y-%Om-%dT%H:%M:%SZ"(1), "%Y-%m-%dT%H:%M:%SZ"(1), "%Y-%Om-%dT%H:%M:%S%Ou"(1), "%Y-%m-%dT%H:%M:%S%Ou"(1)</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; Using: "%Y-%Om-%dT%H:%M:%S%Ou"</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">hws &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="dt">week =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  <span class="dt">name =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Homework"</span>, week),</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  <span class="dt">due =</span> (lubridate<span class="op">::</span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/ymd_hms.html">ymd_hm</a></span>(<span class="st">"2019-09-27 23:59"</span>, <span class="dt">tz =</span> <span class="st">"America/Los_Angeles"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">    </span>lubridate<span class="op">::</span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/period.html">weeks</a></span>(week <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">iso8601</span>()</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">hws</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; # A tibble: 10 x 3</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;     week name        due                 </span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;               </span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  1     1 Homework 1  2019-09-28T06:59:00Z</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  2     2 Homework 2  2019-10-05T06:59:00Z</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  3     3 Homework 3  2019-10-12T06:59:00Z</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  4     4 Homework 4  2019-10-19T06:59:00Z</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt;  5     5 Homework 5  2019-10-26T06:59:00Z</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;  6     6 Homework 6  2019-11-02T06:59:00Z</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt;  7     7 Homework 7  2019-11-09T07:59:00Z</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt;  8     8 Homework 8  2019-11-16T07:59:00Z</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt;  9     9 Homework 9  2019-11-23T07:59:00Z</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; 10    10 Homework 10 2019-11-30T07:59:00Z</span></a></code></pre></div>
<p>Creating a single homework assignment with cnvs would look like:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">one_hw &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/cnvs.html">cnvs</a></span>(<span class="st">"POST /api/v1/courses/:course_id/assignments"</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="dt">course_id =</span> test_course,</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">assignment =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">      <span class="dt">name =</span> hws<span class="op">$</span>name[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">      <span class="dt">due_at =</span> hws<span class="op">$</span>due[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">      <span class="dt">points_possible =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">      <span class="dt">submission_types =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"online_upload"</span>)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">    )</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">)</a></code></pre></div>
<p>To create them all, leverage <code><a href="https://purrr.tidyverse.org/reference/map2.html">purrr::map2</a></code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">all_hws &lt;-<span class="st"> </span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">map2</a></span>(hws<span class="op">$</span>name, hws<span class="op">$</span>due,  </a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/cnvs.html">cnvs</a></span>(<span class="st">"POST /api/v1/courses/:course_id/assignments"</span>,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">      <span class="dt">course_id =</span> test_course,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">      <span class="dt">assignment =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">        <span class="dt">name =</span> .x,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">        <span class="dt">due_at =</span> .y,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">        <span class="dt">points_possible =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">        <span class="dt">submission_types =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"online_upload"</span>)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">      )</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">)</a></code></pre></div>
<p>Delete them all if you want:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">all_hws <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span>(<span class="st">"id"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">walk</a></span>(<span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/cnvs.html">cnvs</a></span>(<span class="st">"DELETE /api/v1/courses/:course_id/assignments/:id"</span>,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">    <span class="dt">id =</span> .,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">    <span class="dt">course_id =</span> test_course))</a></code></pre></div>
</div>
<div id="uploading-course-documents" class="section level1">
<h1 class="hasAnchor">
<a href="#uploading-course-documents" class="anchor"></a>Uploading course documents</h1>
<p><strong>Problem</strong>: You have a whole directory of files on your local computer you want to put in a course on Canvas, preferably maintaining your directory structure.</p>
<p>Let’s say I have some lectures and worksheets on my local computer:</p>
<pre><code>#&gt; .</code></pre>
</div>
<div id="unpublish-all-files-that-match-a-pattern" class="section level1">
<h1 class="hasAnchor">
<a href="#unpublish-all-files-that-match-a-pattern" class="anchor"></a>Unpublish all files that match a pattern</h1>
<p><strong>Problem</strong>: You’ve copied over an old course where you released solution files. You now want to make sure that these files are all now unpublished for the new term.</p>
</div>
<div id="posting-to-every-groups-group-discussion-board" class="section level1">
<h1 class="hasAnchor">
<a href="#posting-to-every-groups-group-discussion-board" class="anchor"></a>Posting to every group’s group discussion board</h1>
<p><strong>Problem</strong>: You want to post your own reply in every group’s discussion board, e.g. an introduction post in a group introduction discussion.</p>
</div>
<div id="setting-all-discussions-to-be-group-discussions" class="section level1">
<h1 class="hasAnchor">
<a href="#setting-all-discussions-to-be-group-discussions" class="anchor"></a>Setting all discussions to be group discussions</h1>
<p><strong>Problem</strong>: You’ve copied over an old course where you used groups from some discussions. Canvas has copied over the group set, but it doesn’t have any students assigned to the groups. You could assign students to the old groups in the old group set, but you would rather set up a new group set that randomly assigns students to groups, then use this new group set for all the discussions.</p>
</div>
<div id="setting-time-extensions-on-quizzes" class="section level1">
<h1 class="hasAnchor">
<a href="#setting-time-extensions-on-quizzes" class="anchor"></a>Setting time extensions on quizzes</h1>
<p><strong>Problem</strong>: A student with a disability accommodation needs 1.5x time on all quizzes.</p>
</div>
<div id="creating-a-canvas-page-from-an-rmarkdown-document" class="section level1">
<h1 class="hasAnchor">
<a href="#creating-a-canvas-page-from-an-rmarkdown-document" class="anchor"></a>Creating a canvas page from an Rmarkdown document</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#create-many-assignments-all-at-once">Create many assignments all at once</a></li>
      <li><a href="#uploading-course-documents">Uploading course documents</a></li>
      <li><a href="#unpublish-all-files-that-match-a-pattern">Unpublish all files that match a pattern</a></li>
      <li><a href="#posting-to-every-groups-group-discussion-board">Posting to every group’s group discussion board</a></li>
      <li><a href="#setting-all-discussions-to-be-group-discussions">Setting all discussions to be group discussions</a></li>
      <li><a href="#setting-time-extensions-on-quizzes">Setting time extensions on quizzes</a></li>
      <li><a href="#creating-a-canvas-page-from-an-rmarkdown-document">Creating a canvas page from an Rmarkdown document</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Charlotte Wickham, Gábor Csárdi, Jennifer Bryan, <a href="http://hadley.nz">Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
